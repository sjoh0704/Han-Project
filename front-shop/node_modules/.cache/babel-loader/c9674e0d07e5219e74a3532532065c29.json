{"ast":null,"code":"var _jsxFileName = \"/home/seung/react/shop/front-shop/src/components/auction/AuctionRegister.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport axios from \"axios\";\nimport { Form, Container, Button, Row, Col } from \"react-bootstrap\"; // import ImageUploading from \"react-images-uploading\";\n\nimport { CategoryDirection } from \"../CategoryBanner\";\nimport AreaButton from \"../AreaButton\";\nimport Modal from \"../Modal\";\nimport { S3Config, UploadS3 } from \"../UploadS3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction AuctionRegister({\n  history\n}) {\n  _s();\n\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalContents, setModalContents] = useState(\"\");\n\n  const closeModal = () => {\n    setModalOpen(false);\n  };\n\n  const [area, setArea] = useState(\"지역을 선택해 주세요\");\n  const {\n    isLoggedIn,\n    userData\n  } = useSelector(state => ({\n    isLoggedIn: state.user.isLoggedIn,\n    userData: state.user.payload\n  }));\n  const [selectedFiles, setSelectedFiles] = useState([]);\n\n  const handleFileInput = e => {\n    // setSelectedFile(selectedFile.concat(e.target.files[0]));\n    setSelectedFiles(selectedFiles.concat(e.target.files[0]));\n  };\n\n  const [content, setContent] = useState({\n    title: \"\",\n    description: \"\"\n  });\n  {\n    seller_id, // type - Number, required : true\n    name, // type - String, required : true\n    price, // type - Number, required : true\n    description, // type - String, required : true\n    fileurl, // type - Array\n    buyer_id; // type - Number\n  }\n  const {\n    title,\n    description\n  } = content;\n\n  const onChangeHandler = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setContent({ ...content,\n      [name]: value\n    });\n  };\n\n  const onChangeArea = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setArea(value);\n  };\n\n  const onClickHandler = () => {\n    if (!(title && description)) {\n      setModalOpen(true);\n      setModalContents(\"모든 항목을 입력해 주세요\");\n      return;\n    }\n\n    if (area == undefined || area == null || area == \"지역을 선택해 주세요\") {\n      setModalOpen(true);\n      setModalContents(\"거래 지역을 선택해 주세요\");\n      return;\n    }\n\n    const body = {\n      user_id: userData.user_id,\n      title: title,\n      area: area,\n      description: description,\n      images: selectedFiles.map(image => `https://${S3Config.bucketName}.s3.${S3Config.region}.amazonaws.com/${image.name}`)\n    };\n    UploadS3(selectedFiles);\n    axios.post(\"/apis/v1/post\", body).then(response => {\n      history.replace(\"/post/page/1\");\n    }).catch(e => {\n      setModalOpen(true);\n      setModalContents(\"상품 등록에 실패하였습니다. 관리자에게 문의하세요.\");\n    });\n  };\n\n  const checkLogin = () => {\n    if (!isLoggedIn || !userData) {\n      alert(\"로그인 후 이용해 주세요!\");\n      history.goBack();\n    }\n  };\n\n  useEffect(() => {\n    checkLogin();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      open: modalOpen,\n      close: closeModal,\n      children: modalContents\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"#dedede\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            xs: {\n              span: 5,\n              offset: 7\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                height: \"2rem\",\n                fontSize: \"1.2rem\",\n                margin: 3,\n                color: \"#44444\"\n              },\n              onClick: () => {\n                history.push(\"/post/register\");\n              },\n              children: \"\\uAC8C\\uC2DC\\uAE00 \\uB4F1\\uB85D\\uD558\\uAE30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(CategoryDirection, {\n        tag1: \"자유거래 게시판\",\n        tag2: \"게시글 등록하기\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: \"1.3rem\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            lg: {\n              span: 11,\n              offset: 2\n            },\n            sm: {\n              span: 12,\n              offset: 0\n            },\n            xs: {\n              span: 12\n            },\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                controlId: \"exampleForm.ControlInput1\",\n                as: Row,\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  column: true,\n                  sm: \"2\",\n                  lg: \"1\",\n                  xs: \"4\",\n                  children: \"\\uC81C\\uBAA9\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 134,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  sm: \"10\",\n                  lg: \"8\",\n                  xs: \"8\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    name: \"title\",\n                    value: title,\n                    onChange: onChangeHandler,\n                    placeholder: \"\\uC0C1\\uD488\\uBA85\\uC744 \\uC801\\uC5B4\\uC8FC\\uC138\\uC694\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 138,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 133,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  sm: \"2\",\n                  lg: \"1\",\n                  xs: \"4\",\n                  style: {\n                    paddingTop: 20\n                  },\n                  children: \"\\uAC70\\uB798 \\uC9C0\\uC5ED\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 143,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  sm: \"6\",\n                  lg: \"6\",\n                  xs: \"6\",\n                  style: {\n                    paddingTop: 8\n                  },\n                  children: /*#__PURE__*/_jsxDEV(AreaButton, {\n                    onChange: onChangeArea,\n                    area: area\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 150,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                controlId: \"exampleForm.ControlTextarea1\",\n                as: Row,\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  column: true,\n                  sm: \"2\",\n                  lg: \"1\",\n                  children: \"\\uB0B4\\uC6A9\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 152,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  sm: \"10\",\n                  lg: \"8\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    as: \"textarea\",\n                    rows: 5,\n                    onChange: onChangeHandler,\n                    name: \"description\",\n                    placeholder: \"\\uC0C1\\uD488 \\uC124\\uBA85\\uC744 \\uC801\\uC5B4\\uC8FC\\uC138\\uC694\",\n                    value: description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 156,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 155,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 151,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 159,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                controlId: \"exampleForm.ControlTextarea1\",\n                as: Row,\n                children: /*#__PURE__*/_jsxDEV(Col, {\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    onChange: handleFileInput\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 160,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                variant: \"outline-light\",\n                style: {\n                  background: \"#e85255\",\n                  fontSize: \"1.3rem\"\n                },\n                onClick: e => {\n                  e.preventDefault();\n                  onClickHandler();\n                },\n                children: \"\\uAC8C\\uC2DC\\uAE00 \\uB4F1\\uB85D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 170,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 132,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 105,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AuctionRegister, \"ILrunvZxFMQC/c/rl8hu3LnB63M=\", false, function () {\n  return [useSelector];\n});\n\n_c = AuctionRegister;\nexport default AuctionRegister;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuctionRegister\");","map":{"version":3,"sources":["/home/seung/react/shop/front-shop/src/components/auction/AuctionRegister.js"],"names":["React","useEffect","useState","useSelector","useDispatch","axios","Form","Container","Button","Row","Col","CategoryDirection","AreaButton","Modal","S3Config","UploadS3","AuctionRegister","history","modalOpen","setModalOpen","modalContents","setModalContents","closeModal","area","setArea","isLoggedIn","userData","state","user","payload","selectedFiles","setSelectedFiles","handleFileInput","e","concat","target","files","content","setContent","title","description","seller_id","name","price","fileurl","buyer_id","onChangeHandler","value","onChangeArea","onClickHandler","undefined","body","user_id","images","map","image","bucketName","region","post","then","response","replace","catch","checkLogin","alert","goBack","background","span","offset","height","fontSize","margin","color","push","paddingTop","preventDefault"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport axios from \"axios\";\nimport { Form, Container, Button, Row, Col } from \"react-bootstrap\";\n// import ImageUploading from \"react-images-uploading\";\nimport { CategoryDirection } from \"../CategoryBanner\";\nimport AreaButton from \"../AreaButton\";\nimport Modal from \"../Modal\";\nimport { S3Config, UploadS3 } from \"../UploadS3\";\n\nfunction AuctionRegister({ history }) {\n    const [modalOpen, setModalOpen] = useState(false);\n    const [modalContents, setModalContents] = useState(\"\");\n    const closeModal = () => {\n        setModalOpen(false);\n    };\n    const [area, setArea] = useState(\"지역을 선택해 주세요\");\n    const { isLoggedIn, userData } = useSelector((state) => ({\n        isLoggedIn: state.user.isLoggedIn,\n        userData: state.user.payload,\n    }));\n\n    const [selectedFiles, setSelectedFiles] = useState([]);\n    const handleFileInput = (e) => {\n        // setSelectedFile(selectedFile.concat(e.target.files[0]));\n        setSelectedFiles(selectedFiles.concat(e.target.files[0]));\n    };\n\n    const [content, setContent] = useState({\n        title: \"\",\n        description: \"\",\n    });\n    {\n        seller_id,  // type - Number, required : true\n        name,   // type - String, required : true\n      price,  // type - Number, required : true\n      description,  // type - String, required : true\n        fileurl, // type - Array\n        buyer_id // type - Number\n    }\n    const { title, description } = content;\n\n    const onChangeHandler = (e) => {\n        const { name, value } = e.target;\n        setContent({\n            ...content,\n            [name]: value,\n        });\n    };\n\n    const onChangeArea = (e) => {\n        const { name, value } = e.target;\n        setArea(value);\n    };\n\n    const onClickHandler = () => {\n        if (!(title && description)) {\n            setModalOpen(true);\n            setModalContents(\"모든 항목을 입력해 주세요\");\n            return;\n        }\n\n        if (area == undefined || area == null || area == \"지역을 선택해 주세요\") {\n            setModalOpen(true);\n            setModalContents(\"거래 지역을 선택해 주세요\");\n            return;\n        }\n\n        const body = {\n            user_id: userData.user_id,\n            title: title,\n            area: area,\n            description: description,\n            images: selectedFiles.map(\n                (image) => `https://${S3Config.bucketName}.s3.${S3Config.region}.amazonaws.com/${image.name}`\n\n            ),\n        };\n\n        UploadS3(selectedFiles);\n\n        axios\n            .post(\"/apis/v1/post\", body)\n            .then((response) => {\n                history.replace(\"/post/page/1\");\n            })\n            .catch((e) => {\n                setModalOpen(true);\n                setModalContents(\"상품 등록에 실패하였습니다. 관리자에게 문의하세요.\");\n            });\n    };\n\n    const checkLogin = () => {\n        if (!isLoggedIn || !userData) {\n            alert(\"로그인 후 이용해 주세요!\");\n            history.goBack();\n        }\n    };\n\n    useEffect(() => {\n        checkLogin();\n    }, []);\n\n    return (\n        <div>\n            <Modal open={modalOpen} close={closeModal}>\n                {modalContents}\n            </Modal>\n            <div style={{ background: \"#dedede\" }}>\n                <Container>\n                    <Row>\n                        <Col xs={{ span: 5, offset: 7 }}>\n                            <div\n                                style={{ height: \"2rem\", fontSize: \"1.2rem\", margin: 3, color: \"#44444\" }}\n                                onClick={() => {\n                                    history.push(\"/post/register\");\n                                }}\n                            >\n                                게시글 등록하기\n                            </div>\n                        </Col>\n                    </Row>\n                </Container>\n            </div>\n\n            <Container>\n                <CategoryDirection tag1={\"자유거래 게시판\"} tag2={\"게시글 등록하기\"}></CategoryDirection>\n                <br />\n                <div style={{ fontSize: \"1.3rem\" }}>\n                    <Row>\n                        <Col lg={{ span: 11, offset: 2 }} sm={{ span: 12, offset: 0 }} xs={{ span: 12 }}>\n                            <Form>\n                                <Form.Group controlId=\"exampleForm.ControlInput1\" as={Row}>\n                                    <Form.Label column sm=\"2\" lg=\"1\" xs=\"4\">\n                                        제목\n                                    </Form.Label>\n                                    <Col sm=\"10\" lg=\"8\" xs=\"8\">\n                                        <Form.Control name=\"title\" value={title} onChange={onChangeHandler} placeholder=\"상품명을 적어주세요\" />\n                                    </Col>\n                                </Form.Group>\n\n                                <Row>\n                                    <Col sm=\"2\" lg=\"1\" xs=\"4\" style={{ paddingTop: 20 }}>\n                                        거래 지역\n                                    </Col>\n                                    <Col sm=\"6\" lg=\"6\" xs=\"6\" style={{ paddingTop: 8 }}>\n                                        <AreaButton onChange={onChangeArea} area={area} />\n                                    </Col>\n                                </Row>\n                                <br />\n                                <Form.Group controlId=\"exampleForm.ControlTextarea1\" as={Row}>\n                                    <Form.Label column sm=\"2\" lg=\"1\">\n                                        내용\n                                    </Form.Label>\n                                    <Col sm=\"10\" lg=\"8\">\n                                        <Form.Control as=\"textarea\" rows={5} onChange={onChangeHandler} name=\"description\" placeholder=\"상품 설명을 적어주세요\" value={description} />\n                                    </Col>\n                                </Form.Group>\n                                <br />\n                                <Form.Group controlId=\"exampleForm.ControlTextarea1\" as={Row}>\n                                    <Col>\n                                        <input type=\"file\" onChange={handleFileInput} />\n                                        {/* <button onClick={(e) => emptyFiles(e)}>Empty</button> */}\n\n                                        {/* <p>{`이미지는 최대 ${maxNumber}개까지만 첨부할 수 있습니다`}</p> */}\n                                        <br />\n                                        <br />\n                                    </Col>\n                                </Form.Group>\n                                <Button\n                                    type=\"submit\"\n                                    variant=\"outline-light\"\n                                    style={{ background: \"#e85255\", fontSize: \"1.3rem\" }}\n                                    onClick={(e) => {\n                                        e.preventDefault();\n                                        onClickHandler();\n                                    }}\n                                >\n                                    게시글 등록\n                                </Button>\n                            </Form>\n                        </Col>\n                    </Row>\n                </div>\n            </Container>\n        </div>\n    );\n}\n\nexport default AuctionRegister;\n"]},"metadata":{},"sourceType":"module"}