{"ast":null,"code":"var _jsxFileName = \"/home/seung/react/shop/front-shop/src/components/PostRegister.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport axios from \"axios\";\nimport { Form, Container, Button, Row, Col } from \"react-bootstrap\";\nimport ImageUploading from \"react-images-uploading\";\nimport { CategoryDirection } from \"./CategoryBanner\";\nimport AreaButton from \"./AreaButton\";\nimport Modal from \"./Modal\";\nimport { S3Config, UploadS3 } from \"./UploadS3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PostRegister({\n  history\n}) {\n  _s();\n\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalContents, setModalContents] = useState(\"\");\n\n  const closeModal = () => {\n    setModalOpen(false);\n  };\n\n  const [area, setArea] = useState(\"지역을 선택해 주세요\");\n  const {\n    isLoggedIn,\n    userData\n  } = useSelector(state => ({\n    isLoggedIn: state.user.isLoggedIn,\n    userData: state.user.payload\n  }));\n  const [selectedFiles, setSelectedFiles] = useState([]);\n\n  const handleFileInput = e => {\n    // setSelectedFile(selectedFile.concat(e.target.files[0]));\n    setSelectedFiles(selectedFiles.concat(e.target.files[0]));\n  };\n\n  const maxNumber = 4;\n  const [content, setContent] = useState({\n    title: \"\",\n    description: \"\"\n  });\n  const {\n    title,\n    description\n  } = content;\n\n  const onChangeHandler = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setContent({ ...content,\n      [name]: value\n    });\n  };\n\n  const onChangeArea = e => {\n    const {\n      name,\n      value\n    } = e.target;\n    setArea(value);\n  };\n\n  const onClickHandler = () => {\n    if (!(title && description)) {\n      setModalOpen(true);\n      setModalContents(\"모든 항목을 입력해 주세요\");\n      return;\n    }\n\n    if (area == undefined || area == null || area == \"지역을 선택해 주세요\") {\n      setModalOpen(true);\n      setModalContents(\"거래 지역을 선택해 주세요\");\n      return;\n    }\n\n    const body = {\n      user_id: userData.user_id,\n      title: title,\n      area: area,\n      description: description,\n      images: selectedFiles.map(image => `https://${S3Config.bucketName}.s3.${S3Config.region}.amazonaws.com/${image.name}` // ...image_list  // 용량이 크면 안넘어가\n      )\n    };\n    UploadS3(selectedFiles);\n    axios.post(\"/apis/v1/post\", body).then(response => {\n      history.replace(\"/post/page/1\");\n    }).catch(e => {\n      setModalOpen(true);\n      setModalContents(\"상품 등록에 실패하였습니다. 관리자에게 문의하세요.\");\n    });\n  };\n\n  const checkLogin = () => {\n    if (!isLoggedIn || !userData) {\n      alert(\"로그인 후 이용해 주세요!\");\n      history.goBack();\n    }\n  };\n\n  useEffect(() => {\n    checkLogin();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      open: modalOpen,\n      close: closeModal,\n      children: modalContents\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Modal, {\n        open: modalOpen,\n        close: closeModal,\n        children: modalContents\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(CategoryDirection, {\n        tag1: \"자유 거래 게시판\",\n        tag2: post.title\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            lg: {\n              span: \"10\",\n              offset: \"1\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"primaryBackground\",\n              style: {\n                fontSize: \"1.8rem\",\n                padding: 5,\n                border: \"1px solid #dedede\",\n                color: \"white\"\n              },\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                children: /*#__PURE__*/_jsxDEV(Col, {\n                  sm: {\n                    offset: 0\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      margin: 3\n                    },\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        fontSize: \"1.5rem\"\n                      },\n                      children: [\"#\", post.id]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 115,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      style: {\n                        marginLeft: 15,\n                        marginRight: 5\n                      },\n                      children: post.title\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 116,\n                      columnNumber: 41\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"[\", post.hit, \"]\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 117,\n                      columnNumber: 41\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 114,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 113,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 112,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                border: \"1px solid #dedede\"\n              },\n              children: /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  lg: {\n                    span: 6,\n                    offset: 0\n                  },\n                  md: {\n                    span: 6,\n                    offset: 0\n                  },\n                  sm: {\n                    span: 7,\n                    offset: 0\n                  },\n                  style: {\n                    marginBottom: 10,\n                    marginLeft: 10\n                  },\n                  children: /*#__PURE__*/_jsxDEV(Rating, {\n                    user: user,\n                    area: post.area\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 37\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 33\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  lg: {\n                    span: 3,\n                    offset: 2\n                  },\n                  md: {\n                    span: 4,\n                    offset: 1\n                  },\n                  sm: {\n                    span: 4,\n                    offset: 0\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      margin: 10,\n                      fontSize: \"1.3rem\"\n                    },\n                    children: [\"Date: \", setDate(post.createdAt)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    style: {\n                      margin: 10,\n                      fontSize: \"1.3rem\"\n                    },\n                    children: [\"Hit: \", post.hit]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 33\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                border: \"1px solid #dedede\",\n                padding: 30\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  style: {\n                    width: \"80%\",\n                    height: \"auto\"\n                  },\n                  src: post.Images.length ? post.Images[0].image_url : \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 136,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 135,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  fontSize: \"1.5rem\",\n                  marginTop: 20\n                },\n                children: post.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 134,\n              columnNumber: 25\n            }, this), comments.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: 10,\n                fontSize: \"1.2rem\",\n                border: \"1px solid #dedede\"\n              },\n              children: [\"\\uB313\\uAE00\\uC774 \", comments.length, \"\\uAC1C \\uB2EC\\uB838\\uC2B5\\uB2C8\\uB2E4.\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 44\n            }, this) : \"\", /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                padding: 10,\n                fontSize: \"1.2rem\",\n                border: \"1px solid #dedede\"\n              },\n              children: comments.length ? comments : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: \"\\uB313\\uAE00\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 133\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 142,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                border: \"1px solid #dedede\",\n                padding: 10\n              },\n              children: /*#__PURE__*/_jsxDEV(Form, {\n                children: /*#__PURE__*/_jsxDEV(Form.Group, {\n                  as: Row,\n                  controlId: \"exampleForm.ControlInput1\",\n                  children: [/*#__PURE__*/_jsxDEV(Col, {\n                    lg: {\n                      span: 10,\n                      offset: 0\n                    },\n                    sm: {\n                      span: 9,\n                      offset: 0\n                    },\n                    xs: {\n                      span: 8,\n                      offset: 0\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                      size: \"lg\",\n                      name: \"contents\",\n                      value: contents,\n                      onChange: onChangeHandler,\n                      placeholder: \"\\uB85C\\uADF8\\uC778 \\uD6C4 \\uC0AC\\uC6A9\\uD574 \\uC8FC\\uC138\\uC694\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 147,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 37\n                  }, this), /*#__PURE__*/_jsxDEV(Col, {\n                    lg: {\n                      span: 2,\n                      offset: 0\n                    },\n                    sm: {\n                      span: 3,\n                      offset: 0\n                    },\n                    xs: {\n                      span: 4,\n                      offset: 0\n                    },\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"d-grid gap-2\",\n                      style: {\n                        fontSize: \"1.3rem\"\n                      },\n                      children: /*#__PURE__*/_jsxDEV(\"button\", {\n                        onClick: onClickHandler,\n                        style: {\n                          height: \"3rem\"\n                        } // type=\"submit\"\n                        ,\n                        className: \"filledButton\",\n                        children: \"\\uB313\\uAE00 \\uC785\\uB825\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 151,\n                        columnNumber: 45\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 150,\n                      columnNumber: 41\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 37\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 33\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 21\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 14\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(CategoryDirection, {\n        tag1: \"자유거래 게시판\",\n        tag2: \"게시글 등록하기\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 170,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: \"1.3rem\"\n        },\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: /*#__PURE__*/_jsxDEV(Col, {\n            lg: {\n              span: 11,\n              offset: 2\n            },\n            sm: {\n              span: 12,\n              offset: 0\n            },\n            xs: {\n              span: 12\n            },\n            children: /*#__PURE__*/_jsxDEV(Form, {\n              children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n                controlId: \"exampleForm.ControlInput1\",\n                as: Row,\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  column: true,\n                  sm: \"2\",\n                  lg: \"1\",\n                  xs: \"4\",\n                  children: \"\\uC81C\\uBAA9\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 176,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  sm: \"10\",\n                  lg: \"8\",\n                  xs: \"8\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    name: \"title\",\n                    value: title,\n                    onChange: onChangeHandler,\n                    placeholder: \"\\uC0C1\\uD488\\uBA85\\uC744 \\uC801\\uC5B4\\uC8FC\\uC138\\uC694\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 180,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 179,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 175,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Row, {\n                children: [/*#__PURE__*/_jsxDEV(Col, {\n                  sm: \"2\",\n                  lg: \"1\",\n                  xs: \"4\",\n                  style: {\n                    paddingTop: 20\n                  },\n                  children: \"\\uAC70\\uB798 \\uC9C0\\uC5ED\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  sm: \"6\",\n                  lg: \"6\",\n                  xs: \"6\",\n                  style: {\n                    paddingTop: 8\n                  },\n                  children: /*#__PURE__*/_jsxDEV(AreaButton, {\n                    onChange: onChangeArea,\n                    area: area\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 189,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                controlId: \"exampleForm.ControlTextarea1\",\n                as: Row,\n                children: [/*#__PURE__*/_jsxDEV(Form.Label, {\n                  column: true,\n                  sm: \"2\",\n                  lg: \"1\",\n                  children: \"\\uB0B4\\uC6A9\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 194,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Col, {\n                  sm: \"10\",\n                  lg: \"8\",\n                  children: /*#__PURE__*/_jsxDEV(Form.Control, {\n                    as: \"textarea\",\n                    rows: 5,\n                    onChange: onChangeHandler,\n                    name: \"description\",\n                    placeholder: \"\\uC0C1\\uD488 \\uC124\\uBA85\\uC744 \\uC801\\uC5B4\\uC8FC\\uC138\\uC694\",\n                    value: description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 198,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 193,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 201,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Form.Group, {\n                controlId: \"exampleForm.ControlTextarea1\",\n                as: Row,\n                children: /*#__PURE__*/_jsxDEV(Col, {\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"file\",\n                    onChange: handleFileInput\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 204,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 208,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 209,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 203,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 202,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Button, {\n                type: \"submit\",\n                variant: \"outline-light\",\n                style: {\n                  background: \"#e85255\",\n                  fontSize: \"1.3rem\"\n                },\n                onClick: e => {\n                  e.preventDefault();\n                  onClickHandler();\n                },\n                children: \"\\uAC8C\\uC2DC\\uAE00 \\uB4F1\\uB85D\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 212,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 174,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PostRegister, \"ILrunvZxFMQC/c/rl8hu3LnB63M=\", false, function () {\n  return [useSelector];\n});\n\n_c = PostRegister;\nexport default PostRegister;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostRegister\");","map":{"version":3,"sources":["/home/seung/react/shop/front-shop/src/components/PostRegister.js"],"names":["React","useEffect","useState","useSelector","useDispatch","axios","Form","Container","Button","Row","Col","ImageUploading","CategoryDirection","AreaButton","Modal","S3Config","UploadS3","PostRegister","history","modalOpen","setModalOpen","modalContents","setModalContents","closeModal","area","setArea","isLoggedIn","userData","state","user","payload","selectedFiles","setSelectedFiles","handleFileInput","e","concat","target","files","maxNumber","content","setContent","title","description","onChangeHandler","name","value","onChangeArea","onClickHandler","undefined","body","user_id","images","map","image","bucketName","region","post","then","response","replace","catch","checkLogin","alert","goBack","span","offset","fontSize","padding","border","color","margin","id","marginLeft","marginRight","hit","marginBottom","setDate","createdAt","width","height","Images","length","image_url","marginTop","comments","contents","paddingTop","background","preventDefault"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport axios from \"axios\";\nimport { Form, Container, Button, Row, Col } from \"react-bootstrap\";\nimport ImageUploading from \"react-images-uploading\";\nimport { CategoryDirection } from \"./CategoryBanner\";\nimport AreaButton from \"./AreaButton\";\nimport Modal from \"./Modal\";\nimport { S3Config, UploadS3 } from \"./UploadS3\";\n\nfunction PostRegister({ history }) {\n    const [modalOpen, setModalOpen] = useState(false);\n    const [modalContents, setModalContents] = useState(\"\");\n    const closeModal = () => {\n        setModalOpen(false);\n    };\n    const [area, setArea] = useState(\"지역을 선택해 주세요\");\n    const { isLoggedIn, userData } = useSelector((state) => ({\n        isLoggedIn: state.user.isLoggedIn,\n        userData: state.user.payload,\n    }));\n\n    const [selectedFiles, setSelectedFiles] = useState([]);\n    const handleFileInput = (e) => {\n        // setSelectedFile(selectedFile.concat(e.target.files[0]));\n        setSelectedFiles(selectedFiles.concat(e.target.files[0]));\n    };\n    const maxNumber = 4;\n\n    const [content, setContent] = useState({\n        title: \"\",\n        description: \"\",\n    });\n    const { title, description } = content;\n\n    const onChangeHandler = (e) => {\n        const { name, value } = e.target;\n        setContent({\n            ...content,\n            [name]: value,\n        });\n    };\n\n    const onChangeArea = (e) => {\n        const { name, value } = e.target;\n        setArea(value);\n    };\n\n    const onClickHandler = () => {\n        if (!(title && description)) {\n            setModalOpen(true);\n            setModalContents(\"모든 항목을 입력해 주세요\");\n            return;\n        }\n\n        if (area == undefined || area == null || area == \"지역을 선택해 주세요\") {\n            setModalOpen(true);\n            setModalContents(\"거래 지역을 선택해 주세요\");\n            return;\n        }\n\n        const body = {\n            user_id: userData.user_id,\n            title: title,\n            area: area,\n            description: description,\n            images: selectedFiles.map(\n                (image) => `https://${S3Config.bucketName}.s3.${S3Config.region}.amazonaws.com/${image.name}`\n                // ...image_list  // 용량이 크면 안넘어가\n            ),\n        };\n\n        UploadS3(selectedFiles);\n\n        axios\n            .post(\"/apis/v1/post\", body)\n            .then((response) => {\n                history.replace(\"/post/page/1\");\n            })\n            .catch((e) => {\n                setModalOpen(true);\n                setModalContents(\"상품 등록에 실패하였습니다. 관리자에게 문의하세요.\");\n            });\n    };\n\n    const checkLogin = () => {\n        if (!isLoggedIn || !userData) {\n            alert(\"로그인 후 이용해 주세요!\");\n            history.goBack();\n        }\n    };\n\n    useEffect(() => {\n        checkLogin();\n    }, []);\n\n    return (\n        <div>\n            <Modal open={modalOpen} close={closeModal}>\n                {modalContents}\n            </Modal>\n             <Container>\n            <Modal open={modalOpen} close={closeModal}>\n                {modalContents}\n            </Modal>\n            <CategoryDirection tag1={\"자유 거래 게시판\"} tag2={post.title}></CategoryDirection>\n            <br />\n            <div>\n                <Row>\n                    <Col lg={{ span: \"10\", offset: \"1\" }}>\n                        <div className=\"primaryBackground\" style={{ fontSize: \"1.8rem\", padding: 5, border: \"1px solid #dedede\", color: \"white\" }}>\n                            <Row>\n                                <Col sm={{ offset: 0 }}>\n                                    <div style={{ margin: 3 }}>\n                                        <span style={{ fontSize: \"1.5rem\" }}>#{post.id}</span>\n                                        <span style={{ marginLeft: 15, marginRight: 5 }}>{post.title}</span>\n                                        <span>[{post.hit}]</span>\n                                    </div>\n                                </Col>\n                            </Row>\n                        </div>\n                        <div style={{ border: \"1px solid #dedede\" }}>\n                            <Row>\n                                <Col lg={{ span: 6, offset: 0 }} md={{ span: 6, offset: 0 }} sm={{ span: 7, offset: 0 }} style={{ marginBottom: 10, marginLeft: 10 }}>\n                                    <Rating user={user} area={post.area} />\n                                </Col>\n                                <Col lg={{ span: 3, offset: 2 }} md={{ span: 4, offset: 1 }} sm={{ span: 4, offset: 0 }}>\n                                    <div style={{ margin: 10, fontSize: \"1.3rem\" }}>Date: {setDate(post.createdAt)}</div>\n                                    <div style={{ margin: 10, fontSize: \"1.3rem\" }}>Hit: {post.hit}</div>\n                                </Col>\n                            </Row>\n                        </div>\n\n                        <div style={{ border: \"1px solid #dedede\", padding: 30 }}>\n                            <div>\n                                <img style={{ width: \"80%\", height: \"auto\" }} src={post.Images.length ? post.Images[0].image_url : \"\"}></img>\n                            </div>\n\n                            <div style={{ fontSize: \"1.5rem\", marginTop: 20 }}>{post.description}</div>\n                        </div>\n                        {comments.length ? <div style={{ padding: 10, fontSize: \"1.2rem\", border: \"1px solid #dedede\" }}>댓글이 {comments.length}개 달렸습니다.</div> : \"\"}\n                        <div style={{ padding: 10, fontSize: \"1.2rem\", border: \"1px solid #dedede\" }}>{comments.length ? comments : <div>댓글이 없습니다</div>}</div>\n                        <div style={{ border: \"1px solid #dedede\", padding: 10 }}>\n                            <Form>\n                                <Form.Group as={Row} controlId=\"exampleForm.ControlInput1\">\n                                    <Col lg={{ span: 10, offset: 0 }} sm={{ span: 9, offset: 0 }} xs={{ span: 8, offset: 0 }}>\n                                        <Form.Control size=\"lg\" name=\"contents\" value={contents} onChange={onChangeHandler} placeholder=\"로그인 후 사용해 주세요\" />\n                                    </Col>\n                                    <Col lg={{ span: 2, offset: 0 }} sm={{ span: 3, offset: 0 }} xs={{ span: 4, offset: 0 }}>\n                                        <div className=\"d-grid gap-2\" style={{ fontSize: \"1.3rem\" }}>\n                                            <button\n                                                onClick={onClickHandler}\n                                                style={{ height: \"3rem\" }}\n                                                // type=\"submit\"\n                                                className=\"filledButton\"\n                                            >\n                                                댓글 입력\n                                            </button>\n                                        </div>\n                                    </Col>\n                                </Form.Group>\n                            </Form>\n                        </div>\n                    </Col>\n                </Row>\n            </div>\n        </Container>\n            <Container>\n                <CategoryDirection tag1={\"자유거래 게시판\"} tag2={\"게시글 등록하기\"}></CategoryDirection>\n                <br />\n                <div style={{ fontSize: \"1.3rem\" }}>\n                    <Row>\n                        <Col lg={{ span: 11, offset: 2 }} sm={{ span: 12, offset: 0 }} xs={{ span: 12 }}>\n                            <Form>\n                                <Form.Group controlId=\"exampleForm.ControlInput1\" as={Row}>\n                                    <Form.Label column sm=\"2\" lg=\"1\" xs=\"4\">\n                                        제목\n                                    </Form.Label>\n                                    <Col sm=\"10\" lg=\"8\" xs=\"8\">\n                                        <Form.Control name=\"title\" value={title} onChange={onChangeHandler} placeholder=\"상품명을 적어주세요\" />\n                                    </Col>\n                                </Form.Group>\n\n                                <Row>\n                                    <Col sm=\"2\" lg=\"1\" xs=\"4\" style={{ paddingTop: 20 }}>\n                                        거래 지역\n                                    </Col>\n                                    <Col sm=\"6\" lg=\"6\" xs=\"6\" style={{ paddingTop: 8 }}>\n                                        <AreaButton onChange={onChangeArea} area={area} />\n                                    </Col>\n                                </Row>\n                                <br />\n                                <Form.Group controlId=\"exampleForm.ControlTextarea1\" as={Row}>\n                                    <Form.Label column sm=\"2\" lg=\"1\">\n                                        내용\n                                    </Form.Label>\n                                    <Col sm=\"10\" lg=\"8\">\n                                        <Form.Control as=\"textarea\" rows={5} onChange={onChangeHandler} name=\"description\" placeholder=\"상품 설명을 적어주세요\" value={description} />\n                                    </Col>\n                                </Form.Group>\n                                <br />\n                                <Form.Group controlId=\"exampleForm.ControlTextarea1\" as={Row}>\n                                    <Col>\n                                        <input type=\"file\" onChange={handleFileInput} />\n                                        {/* <button onClick={(e) => emptyFiles(e)}>Empty</button> */}\n\n                                        {/* <p>{`이미지는 최대 ${maxNumber}개까지만 첨부할 수 있습니다`}</p> */}\n                                        <br />\n                                        <br />\n                                    </Col>\n                                </Form.Group>\n                                <Button\n                                    type=\"submit\"\n                                    variant=\"outline-light\"\n                                    style={{ background: \"#e85255\", fontSize: \"1.3rem\" }}\n                                    onClick={(e) => {\n                                        e.preventDefault();\n                                        onClickHandler();\n                                    }}\n                                >\n                                    게시글 등록\n                                </Button>\n                            </Form>\n                        </Col>\n                    </Row>\n                </div>\n            </Container>\n        </div>\n    );\n}\n\nexport default PostRegister;\n"]},"metadata":{},"sourceType":"module"}