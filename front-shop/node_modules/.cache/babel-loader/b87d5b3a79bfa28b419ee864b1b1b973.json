{"ast":null,"code":"var _jsxFileName = \"/home/seung/react/shop/front-shop/src/components/PurchaseList.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { ListGroup, Container, Row, Col } from \"react-bootstrap\";\nimport Title from \"./Title\";\nimport { useSelector } from \"react-redux\";\nimport placeholder from \"../assets/images/placeholder2.jpg\";\nimport good from \"../assets/images/good.png\";\nimport bad from \"../assets/images/bad.png\";\nimport EmptyCheck from \"./EmptyCheck\";\nimport { CategoryDirection } from \"./CategoryBanner\";\nimport { setMoney, setDate } from \"./Convenient\";\nimport Modal from \"./Modal\";\nimport Rating from \"./Rating\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PurchaseList({\n  history\n}) {\n  _s();\n\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalContents, setModalContents] = useState(\"\");\n\n  const closeModal = () => {\n    setModalOpen(false);\n  };\n\n  var products = [];\n  const [orders, setOrders] = useState([]);\n  const {\n    isLoggedIn,\n    userData\n  } = useSelector(state => ({\n    isLoggedIn: state.user.isLoggedIn,\n    userData: state.user.payload\n  }));\n  const [flag, setFlag] = useState(true);\n\n  const fetchUserInfo = async (userId, orderId) => {\n    let res = await axios.get(\"/apis/v1/user/\" + userId);\n    setModalOpen(true);\n    let data = res.data.payload;\n    setModalContents( /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Rating, {\n        user: data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          marginTop: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: [\"\\uC774\\uBA54\\uC77C: \", data.useremail]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 37,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          marginTop: 20\n        },\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          children: [\"\\uACC4\\uC815 \\uC0DD\\uC131\\uC77C: \", setDate(data.created_at)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 40,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        style: {\n          marginTop: 20\n        },\n        children: [/*#__PURE__*/_jsxDEV(Col, {\n          lg: {\n            span: 4,\n            offset: 2\n          },\n          sm: {\n            span: 4,\n            offset: 2\n          },\n          xs: {\n            span: 4,\n            offset: 2\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            style: {\n              width: 30,\n              height: 30\n            },\n            src: good,\n            onClick: () => evaluateSellerGood(userId, orderId)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              background: \"white\",\n              color: \"green\"\n            },\n            onClick: () => evaluateSellerGood(userId, orderId),\n            children: \"\\uC88B\\uC544\\uC694!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Col, {\n          lg: {\n            span: 4\n          },\n          sm: {\n            span: 4\n          },\n          xs: {\n            span: 4\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            style: {\n              width: 30,\n              height: 30\n            },\n            src: bad,\n            onClick: () => evaluateSellerBad(userId, orderId)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            style: {\n              background: \"white\",\n              color: \"red\"\n            },\n            onClick: () => evaluateSellerBad(userId, orderId),\n            children: \"\\uC2EB\\uC5B4\\uC694!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 50,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 13\n    }, this));\n  };\n\n  const evaluateSellerGood = async (userId, orderId) => {\n    await axios.get(`/apis/v1/ratings/${userId}/up`);\n    await axios.post(`/apis/v1/order/${orderId}`, {\n      rating_check: true\n    });\n    setModalOpen(false);\n    setFlag(!flag);\n  };\n\n  const evaluateSellerBad = async (userId, orderId) => {\n    await axios.get(`/apis/v1/ratings/${userId}/down`);\n    await axios.post(`/apis/v1/order/${orderId}`, {\n      rating_check: true\n    });\n    setModalOpen(false);\n    setFlag(!flag);\n  };\n\n  const fetchOrders = async () => {\n    let res = await axios.get(\"/apis/v1/order/\" + userData.user_id);\n    let tmp_order = res.data.payload.filter(order => order.sales_stage == \"SO\");\n    let orderlist = tmp_order.map((order, index) => {\n      return /*#__PURE__*/_jsxDEV(ListGroup.Item, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          style: {\n            margin: 30\n          },\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            sm: \"6\",\n            lg: \"5\",\n            xs: \"12\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              style: {\n                height: \"auto\",\n                maxWidth: \"100%\",\n                height: \"auto\"\n              },\n              src: order.base64_image_url ? order.base64_image_url : placeholder\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            sm: \"6\",\n            lg: {\n              span: 6,\n              offset: 1\n            },\n            xs: \"12\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                paddingTop: 10\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: \"1.5rem\",\n                  fontWeight: \"bold\"\n                },\n                children: order.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: \"1.3rem\"\n                },\n                children: [\"\\uAD6C\\uB9E4\\uB7C9: \", order.demand_quantity]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 89,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: \"1.3rem\"\n                },\n                children: [\"\\uC9C0\\uBD88 \\uAE08\\uC561: \", setMoney(order.price), \" \\u20A9\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 90,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                style: {\n                  fontSize: \"1.3rem\"\n                },\n                children: [\"\\uC8FC\\uBB38 \\uB0A0\\uC9DC: \", setDate(order.created_at)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 33\n              }, this), !order.rating_check ? /*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontSize: \"1.3rem\",\n                    color: \"blue\"\n                  },\n                  children: \"\\uD310\\uB9E4\\uC790\\uC758 \\uB9E4\\uB108\\uB97C \\uD3C9\\uAC00\\uD574\\uBCFC\\uAE4C\\uC694?\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"emptyButton\",\n                  onClick: () => fetchUserInfo(order.seller_id, order.order_id),\n                  style: {\n                    height: \"4rem\",\n                    fontSize: \"1.3rem\"\n                  },\n                  children: \"\\uB9E4\\uB108 \\uD3C9\\uAC00\\uD558\\uAE30\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 95,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 93,\n                columnNumber: 37\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    fontSize: \"1.3rem\",\n                    color: \"green\"\n                  },\n                  children: \"\\uB9E4\\uB108 \\uD3C9\\uAC00\\uB97C \\uC644\\uB8CC\\uD588\\uC2B5\\uB2C8\\uB2E4.\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 101,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 100,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 87,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 21\n        }, this)\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 17\n      }, this);\n    });\n    setOrders(orderlist);\n  };\n\n  useEffect(() => {\n    fetchOrders();\n  }, [userData.user_id, flag]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      open: modalOpen,\n      close: closeModal,\n      children: modalContents\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(CategoryDirection, {\n        tag1: \"구매 목록\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(EmptyCheck, {\n        text: \"구매한 상품이 없습니다\",\n        items: orders\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PurchaseList, \"j4Z8P025bP7VsI9bhZoIG+xweW4=\", false, function () {\n  return [useSelector];\n});\n\n_c = PurchaseList;\nexport default PurchaseList;\n\nvar _c;\n\n$RefreshReg$(_c, \"PurchaseList\");","map":{"version":3,"sources":["/home/seung/react/shop/front-shop/src/components/PurchaseList.js"],"names":["React","useState","useEffect","axios","ListGroup","Container","Row","Col","Title","useSelector","placeholder","good","bad","EmptyCheck","CategoryDirection","setMoney","setDate","Modal","Rating","PurchaseList","history","modalOpen","setModalOpen","modalContents","setModalContents","closeModal","products","orders","setOrders","isLoggedIn","userData","state","user","payload","flag","setFlag","fetchUserInfo","userId","orderId","res","get","data","marginTop","useremail","created_at","span","offset","width","height","evaluateSellerGood","background","color","evaluateSellerBad","post","rating_check","fetchOrders","user_id","tmp_order","filter","order","sales_stage","orderlist","map","index","margin","maxWidth","base64_image_url","paddingTop","fontSize","fontWeight","name","demand_quantity","price","seller_id","order_id"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,EAAoBC,SAApB,EAA+BC,GAA/B,EAAoCC,GAApC,QAA+C,iBAA/C;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,WAAT,QAA4B,aAA5B;AACA,OAAOC,WAAP,MAAwB,mCAAxB;AACA,OAAOC,IAAP,MAAiB,2BAAjB;AACA,OAAOC,GAAP,MAAgB,0BAAhB;AAEA,OAAOC,UAAP,MAAuB,cAAvB;AACA,SAASC,iBAAT,QAAkC,kBAAlC;AACA,SAASC,QAAT,EAAmBC,OAAnB,QAAkC,cAAlC;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;;;AAEA,SAASC,YAAT,CAAsB;AAAEC,EAAAA;AAAF,CAAtB,EAAmC;AAAA;;AAC/B,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BrB,QAAQ,CAAC,KAAD,CAA1C;AACA,QAAM,CAACsB,aAAD,EAAgBC,gBAAhB,IAAoCvB,QAAQ,CAAC,EAAD,CAAlD;;AACA,QAAMwB,UAAU,GAAG,MAAM;AACrBH,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACH,GAFD;;AAGA,MAAII,QAAQ,GAAG,EAAf;AACA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsB3B,QAAQ,CAAC,EAAD,CAApC;AACA,QAAM;AAAE4B,IAAAA,UAAF;AAAcC,IAAAA;AAAd,MAA2BrB,WAAW,CAAEsB,KAAD,KAAY;AACrDF,IAAAA,UAAU,EAAEE,KAAK,CAACC,IAAN,CAAWH,UAD8B;AAErDC,IAAAA,QAAQ,EAAEC,KAAK,CAACC,IAAN,CAAWC;AAFgC,GAAZ,CAAD,CAA5C;AAIA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBlC,QAAQ,CAAC,IAAD,CAAhC;;AAEA,QAAMmC,aAAa,GAAG,OAAOC,MAAP,EAAeC,OAAf,KAA2B;AAC7C,QAAIC,GAAG,GAAG,MAAMpC,KAAK,CAACqC,GAAN,CAAU,mBAAmBH,MAA7B,CAAhB;AACAf,IAAAA,YAAY,CAAC,IAAD,CAAZ;AACA,QAAImB,IAAI,GAAGF,GAAG,CAACE,IAAJ,CAASR,OAApB;AACAT,IAAAA,gBAAgB,eACZ,QAAC,SAAD;AAAA,8BACI,QAAC,MAAD;AAAQ,QAAA,IAAI,EAAEiB;AAAd;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,QAAC,GAAD;AAAK,QAAA,KAAK,EAAE;AAAEC,UAAAA,SAAS,EAAE;AAAb,SAAZ;AAAA,+BACI,QAAC,GAAD;AAAA,6CAAWD,IAAI,CAACE,SAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAFJ,eAKI,QAAC,GAAD;AAAK,QAAA,KAAK,EAAE;AAAED,UAAAA,SAAS,EAAE;AAAb,SAAZ;AAAA,+BACI,QAAC,GAAD;AAAA,0DAAc1B,OAAO,CAACyB,IAAI,CAACG,UAAN,CAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cALJ,eAQI,QAAC,GAAD;AAAK,QAAA,KAAK,EAAE;AAAEF,UAAAA,SAAS,EAAE;AAAb,SAAZ;AAAA,gCACI,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE;AAAEG,YAAAA,IAAI,EAAE,CAAR;AAAWC,YAAAA,MAAM,EAAE;AAAnB,WAAT;AAAiC,UAAA,EAAE,EAAE;AAAED,YAAAA,IAAI,EAAE,CAAR;AAAWC,YAAAA,MAAM,EAAE;AAAnB,WAArC;AAA6D,UAAA,EAAE,EAAE;AAAED,YAAAA,IAAI,EAAE,CAAR;AAAWC,YAAAA,MAAM,EAAE;AAAnB,WAAjE;AAAA,kCACI;AAAK,YAAA,KAAK,EAAE;AAAEC,cAAAA,KAAK,EAAE,EAAT;AAAaC,cAAAA,MAAM,EAAE;AAArB,aAAZ;AAAuC,YAAA,GAAG,EAAErC,IAA5C;AAAkD,YAAA,OAAO,EAAE,MAAMsC,kBAAkB,CAACZ,MAAD,EAASC,OAAT;AAAnF;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAQ,YAAA,KAAK,EAAE;AAAEY,cAAAA,UAAU,EAAE,OAAd;AAAuBC,cAAAA,KAAK,EAAE;AAA9B,aAAf;AAAwD,YAAA,OAAO,EAAE,MAAMF,kBAAkB,CAACZ,MAAD,EAASC,OAAT,CAAzF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBADJ,eAOI,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE;AAAEO,YAAAA,IAAI,EAAE;AAAR,WAAT;AAAsB,UAAA,EAAE,EAAE;AAAEA,YAAAA,IAAI,EAAE;AAAR,WAA1B;AAAuC,UAAA,EAAE,EAAE;AAAEA,YAAAA,IAAI,EAAE;AAAR,WAA3C;AAAA,kCACI;AAAK,YAAA,KAAK,EAAE;AAAEE,cAAAA,KAAK,EAAE,EAAT;AAAaC,cAAAA,MAAM,EAAE;AAArB,aAAZ;AAAuC,YAAA,GAAG,EAAEpC,GAA5C;AAAiD,YAAA,OAAO,EAAE,MAAMwC,iBAAiB,CAACf,MAAD,EAASC,OAAT;AAAjF;AAAA;AAAA;AAAA;AAAA,kBADJ,eAEI;AAAQ,YAAA,KAAK,EAAE;AAAEY,cAAAA,UAAU,EAAE,OAAd;AAAuBC,cAAAA,KAAK,EAAE;AAA9B,aAAf;AAAsD,YAAA,OAAO,EAAE,MAAMC,iBAAiB,CAACf,MAAD,EAASC,OAAT,CAAtF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,gBAPJ;AAAA;AAAA;AAAA;AAAA;AAAA,cARJ;AAAA;AAAA;AAAA;AAAA;AAAA,YADY,CAAhB;AAyBH,GA7BD;;AA+BA,QAAMW,kBAAkB,GAAG,OAAOZ,MAAP,EAAeC,OAAf,KAA2B;AAClD,UAAMnC,KAAK,CAACqC,GAAN,CAAW,oBAAmBH,MAAO,KAArC,CAAN;AACA,UAAMlC,KAAK,CAACkD,IAAN,CAAY,kBAAiBf,OAAQ,EAArC,EAAwC;AAAEgB,MAAAA,YAAY,EAAE;AAAhB,KAAxC,CAAN;AAEAhC,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACAa,IAAAA,OAAO,CAAC,CAACD,IAAF,CAAP;AACH,GAND;;AAOA,QAAMkB,iBAAiB,GAAG,OAAOf,MAAP,EAAeC,OAAf,KAA2B;AACjD,UAAMnC,KAAK,CAACqC,GAAN,CAAW,oBAAmBH,MAAO,OAArC,CAAN;AACA,UAAMlC,KAAK,CAACkD,IAAN,CAAY,kBAAiBf,OAAQ,EAArC,EAAwC;AAAEgB,MAAAA,YAAY,EAAE;AAAhB,KAAxC,CAAN;AACAhC,IAAAA,YAAY,CAAC,KAAD,CAAZ;AACAa,IAAAA,OAAO,CAAC,CAACD,IAAF,CAAP;AACH,GALD;;AAOA,QAAMqB,WAAW,GAAG,YAAY;AAC5B,QAAIhB,GAAG,GAAG,MAAMpC,KAAK,CAACqC,GAAN,CAAU,oBAAoBV,QAAQ,CAAC0B,OAAvC,CAAhB;AACA,QAAIC,SAAS,GAAGlB,GAAG,CAACE,IAAJ,CAASR,OAAT,CAAiByB,MAAjB,CAAyBC,KAAD,IAAWA,KAAK,CAACC,WAAN,IAAqB,IAAxD,CAAhB;AAEA,QAAIC,SAAS,GAAGJ,SAAS,CAACK,GAAV,CAAc,CAACH,KAAD,EAAQI,KAAR,KAAkB;AAC5C,0BACI,QAAC,SAAD,CAAW,IAAX;AAAA,+BACI,QAAC,GAAD;AAAK,UAAA,KAAK,EAAE;AAAEC,YAAAA,MAAM,EAAE;AAAV,WAAZ;AAAA,kCACI,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,GAAR;AAAY,YAAA,EAAE,EAAC,GAAf;AAAmB,YAAA,EAAE,EAAC,IAAtB;AAAA,mCACI;AAAK,cAAA,KAAK,EAAE;AAAEhB,gBAAAA,MAAM,EAAE,MAAV;AAAkBiB,gBAAAA,QAAQ,EAAE,MAA5B;AAAoCjB,gBAAAA,MAAM,EAAE;AAA5C,eAAZ;AAAkE,cAAA,GAAG,EAAEW,KAAK,CAACO,gBAAN,GAAyBP,KAAK,CAACO,gBAA/B,GAAkDxD;AAAzH;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBADJ,eAII,QAAC,GAAD;AAAK,YAAA,EAAE,EAAC,GAAR;AAAY,YAAA,EAAE,EAAE;AAAEmC,cAAAA,IAAI,EAAE,CAAR;AAAWC,cAAAA,MAAM,EAAE;AAAnB,aAAhB;AAAwC,YAAA,EAAE,EAAC,IAA3C;AAAA,mCACI;AAAK,cAAA,KAAK,EAAE;AAAEqB,gBAAAA,UAAU,EAAE;AAAd,eAAZ;AAAA,sCACI;AAAG,gBAAA,KAAK,EAAE;AAAEC,kBAAAA,QAAQ,EAAE,QAAZ;AAAsBC,kBAAAA,UAAU,EAAE;AAAlC,iBAAV;AAAA,0BAAuDV,KAAK,CAACW;AAA7D;AAAA;AAAA;AAAA;AAAA,sBADJ,eAEI;AAAG,gBAAA,KAAK,EAAE;AAAEF,kBAAAA,QAAQ,EAAE;AAAZ,iBAAV;AAAA,mDAAwCT,KAAK,CAACY,eAA9C;AAAA;AAAA;AAAA;AAAA;AAAA,sBAFJ,eAGI;AAAG,gBAAA,KAAK,EAAE;AAAEH,kBAAAA,QAAQ,EAAE;AAAZ,iBAAV;AAAA,0DAA0CrD,QAAQ,CAAC4C,KAAK,CAACa,KAAP,CAAlD;AAAA;AAAA;AAAA;AAAA;AAAA,sBAHJ,eAII;AAAG,gBAAA,KAAK,EAAE;AAAEJ,kBAAAA,QAAQ,EAAE;AAAZ,iBAAV;AAAA,0DAA0CpD,OAAO,CAAC2C,KAAK,CAACf,UAAP,CAAjD;AAAA;AAAA;AAAA;AAAA;AAAA,sBAJJ,EAKK,CAACe,KAAK,CAACL,YAAP,gBACG;AAAA,wCACI;AAAG,kBAAA,KAAK,EAAE;AAAEc,oBAAAA,QAAQ,EAAE,QAAZ;AAAsBjB,oBAAAA,KAAK,EAAE;AAA7B,mBAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADJ,eAEI;AAAQ,kBAAA,SAAS,EAAC,aAAlB;AAAgC,kBAAA,OAAO,EAAE,MAAMf,aAAa,CAACuB,KAAK,CAACc,SAAP,EAAkBd,KAAK,CAACe,QAAxB,CAA5D;AAA+F,kBAAA,KAAK,EAAE;AAAE1B,oBAAAA,MAAM,EAAE,MAAV;AAAkBoB,oBAAAA,QAAQ,EAAE;AAA5B,mBAAtG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,sBADH,gBAQG;AAAA,uCACI;AAAG,kBAAA,KAAK,EAAE;AAAEA,oBAAAA,QAAQ,EAAE,QAAZ;AAAsBjB,oBAAAA,KAAK,EAAE;AAA7B,mBAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,sBAbR;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,kBAJJ;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ,SAAqBY,KAArB;AAAA;AAAA;AAAA;AAAA,cADJ;AA6BH,KA9Be,CAAhB;AAgCAnC,IAAAA,SAAS,CAACiC,SAAD,CAAT;AACH,GArCD;;AAuCA3D,EAAAA,SAAS,CAAC,MAAM;AACZqD,IAAAA,WAAW;AACd,GAFQ,EAEN,CAACzB,QAAQ,CAAC0B,OAAV,EAAmBtB,IAAnB,CAFM,CAAT;AAIA,sBACI;AAAA,4BACI,QAAC,KAAD;AAAO,MAAA,IAAI,EAAEb,SAAb;AAAwB,MAAA,KAAK,EAAEI,UAA/B;AAAA,gBACKF;AADL;AAAA;AAAA;AAAA;AAAA,YADJ,eAKI,QAAC,SAAD;AAAA,8BACI,QAAC,iBAAD;AAAmB,QAAA,IAAI,EAAE;AAAzB;AAAA;AAAA;AAAA;AAAA,cADJ,eAEI,QAAC,UAAD;AAAY,QAAA,IAAI,EAAE,cAAlB;AAAkC,QAAA,KAAK,EAAEI;AAAzC;AAAA;AAAA;AAAA;AAAA,cAFJ;AAAA;AAAA;AAAA;AAAA;AAAA,YALJ;AAAA;AAAA;AAAA;AAAA;AAAA,UADJ;AAYH;;GAlHQR,Y;UAQ4BV,W;;;KAR5BU,Y;AAoHT,eAAeA,YAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\nimport { ListGroup, Container, Row, Col } from \"react-bootstrap\";\nimport Title from \"./Title\";\nimport { useSelector } from \"react-redux\";\nimport placeholder from \"../assets/images/placeholder2.jpg\";\nimport good from \"../assets/images/good.png\";\nimport bad from \"../assets/images/bad.png\";\n\nimport EmptyCheck from \"./EmptyCheck\";\nimport { CategoryDirection } from \"./CategoryBanner\";\nimport { setMoney, setDate } from \"./Convenient\";\nimport Modal from \"./Modal\";\nimport Rating from \"./Rating\";\n\nfunction PurchaseList({ history }) {\n    const [modalOpen, setModalOpen] = useState(false);\n    const [modalContents, setModalContents] = useState(\"\");\n    const closeModal = () => {\n        setModalOpen(false);\n    };\n    var products = [];\n    const [orders, setOrders] = useState([]);\n    const { isLoggedIn, userData } = useSelector((state) => ({\n        isLoggedIn: state.user.isLoggedIn,\n        userData: state.user.payload,\n    }));\n    const [flag, setFlag] = useState(true);\n\n    const fetchUserInfo = async (userId, orderId) => {\n        let res = await axios.get(\"/apis/v1/user/\" + userId);\n        setModalOpen(true);\n        let data = res.data.payload;\n        setModalContents(\n            <Container>\n                <Rating user={data}></Rating>\n                <Row style={{ marginTop: 20 }}>\n                    <Col>이메일: {data.useremail}</Col>\n                </Row>\n                <Row style={{ marginTop: 20 }}>\n                    <Col>계정 생성일: {setDate(data.created_at)}</Col>\n                </Row>\n                <Row style={{ marginTop: 20 }}>\n                    <Col lg={{ span: 4, offset: 2 }} sm={{ span: 4, offset: 2 }} xs={{ span: 4, offset: 2 }}>\n                        <img style={{ width: 30, height: 30 }} src={good} onClick={() => evaluateSellerGood(userId, orderId)}></img>\n                        <button style={{ background: \"white\", color: \"green\" }} onClick={() => evaluateSellerGood(userId, orderId)}>\n                            좋아요!\n                        </button>\n                    </Col>\n                    <Col lg={{ span: 4 }} sm={{ span: 4 }} xs={{ span: 4 }}>\n                        <img style={{ width: 30, height: 30 }} src={bad} onClick={() => evaluateSellerBad(userId, orderId)}></img>\n                        <button style={{ background: \"white\", color: \"red\" }} onClick={() => evaluateSellerBad(userId, orderId)}>\n                            싫어요!\n                        </button>\n                    </Col>\n                </Row>\n            </Container>\n        );\n    };\n\n    const evaluateSellerGood = async (userId, orderId) => {\n        await axios.get(`/apis/v1/ratings/${userId}/up`);\n        await axios.post(`/apis/v1/order/${orderId}`, { rating_check: true });\n\n        setModalOpen(false);\n        setFlag(!flag);\n    };\n    const evaluateSellerBad = async (userId, orderId) => {\n        await axios.get(`/apis/v1/ratings/${userId}/down`);\n        await axios.post(`/apis/v1/order/${orderId}`, { rating_check: true });\n        setModalOpen(false);\n        setFlag(!flag);\n    };\n\n    const fetchOrders = async () => {\n        let res = await axios.get(\"/apis/v1/order/\" + userData.user_id);\n        let tmp_order = res.data.payload.filter((order) => order.sales_stage == \"SO\");\n\n        let orderlist = tmp_order.map((order, index) => {\n            return (\n                <ListGroup.Item key={index}>\n                    <Row style={{ margin: 30 }}>\n                        <Col sm=\"6\" lg=\"5\" xs=\"12\">\n                            <img style={{ height: \"auto\", maxWidth: \"100%\", height: \"auto\" }} src={order.base64_image_url ? order.base64_image_url : placeholder}></img>\n                        </Col>\n                        <Col sm=\"6\" lg={{ span: 6, offset: 1 }} xs=\"12\">\n                            <div style={{ paddingTop: 10 }}>\n                                <p style={{ fontSize: \"1.5rem\", fontWeight: \"bold\" }}>{order.name}</p>\n                                <p style={{ fontSize: \"1.3rem\" }}>구매량: {order.demand_quantity}</p>\n                                <p style={{ fontSize: \"1.3rem\" }}>지불 금액: {setMoney(order.price)} ₩</p>\n                                <p style={{ fontSize: \"1.3rem\" }}>주문 날짜: {setDate(order.created_at)}</p>\n                                {!order.rating_check ? (\n                                    <div>\n                                        <p style={{ fontSize: \"1.3rem\", color: \"blue\" }}>판매자의 매너를 평가해볼까요?</p>\n                                        <button className=\"emptyButton\" onClick={() => fetchUserInfo(order.seller_id, order.order_id)} style={{ height: \"4rem\", fontSize: \"1.3rem\" }}>\n                                            매너 평가하기\n                                        </button>\n                                    </div>\n                                ) : (\n                                    <div>\n                                        <p style={{ fontSize: \"1.3rem\", color: \"green\" }}>매너 평가를 완료했습니다.</p>\n                                    </div>\n                                )}\n                            </div>\n                        </Col>\n                    </Row>\n                </ListGroup.Item>\n            );\n        });\n\n        setOrders(orderlist);\n    };\n\n    useEffect(() => {\n        fetchOrders();\n    }, [userData.user_id, flag]);\n\n    return (\n        <div>\n            <Modal open={modalOpen} close={closeModal}>\n                {modalContents}\n            </Modal>\n\n            <Container>\n                <CategoryDirection tag1={\"구매 목록\"}></CategoryDirection>\n                <EmptyCheck text={\"구매한 상품이 없습니다\"} items={orders}></EmptyCheck>\n            </Container>\n        </div>\n    );\n}\n\nexport default PurchaseList;\n"]},"metadata":{},"sourceType":"module"}