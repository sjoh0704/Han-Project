{"ast":null,"code":"var _jsxFileName = \"/home/seung/react/shop/front-shop/src/components/auction/AuctionDetail.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport { ListGroup, Container, Button, Form, Row, Col, ListGroupItem } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport EmptyHeartImg from \"../../assets/images/heart.png\";\nimport HeartImg from \"../../assets/images/heart_pressed.png\";\nimport { CategoryDirection } from \"../CategoryBanner\";\nimport { setMoney, setDate } from \"../Convenient\";\nimport Rating from \"../Rating\";\nimport Modal from \"../Modal\";\nimport Socket from \"../network/socket\";\nimport React, { memo, useState, useEffect } from \"react\";\nimport parseDate from \"../util/date\";\nimport ProductService from \"../service/product\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Products = /*#__PURE__*/memo(_c = _s(({\n  product,\n  productService,\n  onError,\n  oneproduct\n}) => {\n  _s();\n\n  const history = useHistory();\n  const {\n    id,\n    buyer_id,\n    // seller_id,\n    createdAt,\n    fileurl,\n    finish,\n    name,\n    price,\n    description\n  } = product;\n  const path = \"/\" + id;\n\n  const gotoProductadd = product => {\n    history.push({\n      pathname: \"/productadd\",\n      state: {\n        products: product\n      }\n    });\n  };\n\n  const onClick = event => {\n    productService.getProducts(id) // id에 맞는 상품 들고오기\n    .then(product => gotoProductadd(product)).catch(onError);\n  };\n\n  const finished = {\n    id: id,\n    finish: true\n  };\n\n  const onfinish = () => {\n    productService.updateProduct(finished).then(pro => productService.postBuyer(pro)).catch(onError);\n  };\n\n  const refresh = () => {\n    window.location.replace(\"/\");\n  };\n\n  const Plus = async () => {\n    productService.plusProduct(id, buyer_id); // 입찰시 금액 10% 추가\n  };\n\n  const remove = async () => {\n    console.log(\"타입은?\", typeof id);\n    productService.removeProduct(id); // id 찾아서 그 상품 삭제\n\n    setTimeout(refresh, 20000);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"card\",\n      children: /*#__PURE__*/_jsxDEV(Link, {\n        to: path,\n        children: [fileurl.map(url => {\n          return /*#__PURE__*/_jsxDEV(\"img\", {\n            className: \"card-img-top\",\n            src: url.fileurls,\n            alt: \"Card image cap\"\n          }, Math.random(), false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 32\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"card-title\",\n            children: name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 25\n          }, this), oneproduct && /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"card-text\",\n              children: price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 76,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n              children: [\" - buyer_id : \", buyer_id && buyer_id || \"현재 입찰자 없음\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: Plus,\n              children: [parseInt(price * 1.1), \"\\uC6D0\\uC5D0 \\uC785\\uCC30\\uD558\\uAE30\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true) || /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"\\uC785\\uCC30\\uC740 \\uC0C1\\uD488 \\uC0C1\\uC138\\uC5D0\\uC11C \\uAC00\\uB2A5\\uD569\\uB2C8\\uB2E4. \\uD604\\uC7AC \\uAE08\\uC561\\uC744 \\uBCF4\\uC2DC\\uAC70\\uB098 \\uC785\\uCC30\\uD558\\uC2DC\\uB824\\uBA74 \\uC0C1\\uD488\\uC744 \\uD074\\uB9AD\\uD558\\uC138\\uC694\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 31\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"card-text\",\n            children: /*#__PURE__*/_jsxDEV(\"small\", {\n              className: \"text-muted\",\n              children: description\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 83,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            children: finish == false && parseDate(createdAt).length == 27 ? onfinish() : parseDate(createdAt)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 13\n    }, this), finish == false ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: remove,\n        children: \"\\uC0AD\\uC81C\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClick,\n        children: \"\\uC0C1\\uD488 \\uC218\\uC815\\uD558\\uAE30\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true) : \"\", /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}, \"9cZfZ04734qoCGIctmKX7+sX6eU=\", false, function () {\n  return [useHistory];\n}));\n_c2 = Products;\n\nconst AuctionDetail = ({\n  match\n}) => {\n  _s2();\n\n  const baseURL = process.env.REACT_APP_BASE_URL;\n  const socketClient = new Socket(baseURL);\n  const productService = new ProductService(socketClient);\n  const product_id = match.params.number;\n  const history = useHistory();\n  console.log(\"히스토리\", history);\n  const [products, setProducts] = useState([]);\n  const [error, setError] = useState(\"\");\n\n  const getProduct = async () => {\n    let res = await get();\n  };\n\n  useEffect(() => {\n    product_id ? productService.getProducts(product_id) // product_id인 상품 가져오기\n    .then(product => setProducts([{ ...product\n    }])).catch(onError) : productService.getProducts() // 모든 상품 가져오기\n    .then(product => setProducts([...product])).catch(onError);\n    const stopSync = productService.onSync(product => onCreated(product));\n    return () => stopSync();\n  }, [productService]);\n\n  const onCreated = product => {\n    setProducts(products => products[0].id == product.id && products.length == 1 ? [product] : products); // setProducts(products => (products.length == 1 ? [product] : products));\n    // setProducts(products) : setProducts(product);\n  };\n\n  console.log(\"이건\", products);\n\n  const onError = error => {\n    setError(error.toString());\n    setTimeout(() => {\n      setError(\"\");\n    }, 3000);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: products.length !== 1 ? \"\" : /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: products.map(product => /*#__PURE__*/_jsxDEV(Products, {\n        oneproduct: true,\n        productService: productService,\n        product: product,\n        onError: onError\n      }, product.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 25\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 17\n    }, this)\n  }, void 0, false);\n};\n\n_s2(AuctionDetail, \"avg32epKJqWMysi38mFl89uxJsw=\", false, function () {\n  return [useHistory];\n});\n\n_c3 = AuctionDetail;\nexport default AuctionDetail;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"Products$memo\");\n$RefreshReg$(_c2, \"Products\");\n$RefreshReg$(_c3, \"AuctionDetail\");","map":{"version":3,"sources":["/home/seung/react/shop/front-shop/src/components/auction/AuctionDetail.js"],"names":["ListGroup","Container","Button","Form","Row","Col","ListGroupItem","axios","useSelector","Link","useHistory","EmptyHeartImg","HeartImg","CategoryDirection","setMoney","setDate","Rating","Modal","Socket","React","memo","useState","useEffect","parseDate","ProductService","Products","product","productService","onError","oneproduct","history","id","buyer_id","createdAt","fileurl","finish","name","price","description","path","gotoProductadd","push","pathname","state","products","onClick","event","getProducts","then","catch","finished","onfinish","updateProduct","pro","postBuyer","refresh","window","location","replace","Plus","plusProduct","remove","console","log","removeProduct","setTimeout","map","url","fileurls","Math","random","parseInt","length","AuctionDetail","match","baseURL","process","env","REACT_APP_BASE_URL","socketClient","product_id","params","number","setProducts","error","setError","getProduct","res","get","stopSync","onSync","onCreated","toString"],"mappings":"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","sourcesContent":["import { ListGroup, Container, Button, Form, Row, Col, ListGroupItem } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport { useSelector } from \"react-redux\";\nimport { Link, useHistory } from \"react-router-dom\";\nimport EmptyHeartImg from \"../../assets/images/heart.png\";\nimport HeartImg from \"../../assets/images/heart_pressed.png\";\nimport { CategoryDirection } from \"../CategoryBanner\";\nimport { setMoney, setDate } from \"../Convenient\";\nimport Rating from \"../Rating\";\nimport Modal from \"../Modal\";\nimport Socket from \"../network/socket\";\nimport React, { memo, useState, useEffect } from \"react\";\nimport parseDate from \"../util/date\";\nimport ProductService from \"../service/product\";\n\nconst Products = memo(({ product, productService, onError, oneproduct }) => {\n    const history = useHistory();\n    const {\n        id,\n        buyer_id,\n        // seller_id,\n        createdAt,\n        fileurl,\n        finish,\n        name,\n        price,\n        description,\n    } = product;\n\n    const path = \"/\" + id;\n    const gotoProductadd = (product) => {\n        history.push({\n            pathname: \"/productadd\",\n            state: { products: product },\n        });\n    };\n\n    const onClick = (event) => {\n        productService\n            .getProducts(id) // id에 맞는 상품 들고오기\n            .then((product) => gotoProductadd(product))\n            .catch(onError);\n    };\n    const finished = { id: id, finish: true };\n    const onfinish = () => {\n        productService\n            .updateProduct(finished)\n            .then((pro) => productService.postBuyer(pro))\n            .catch(onError);\n    };\n    const refresh = () => {\n        window.location.replace(\"/\");\n    };\n\n    const Plus = async () => {\n        productService.plusProduct(id, buyer_id); // 입찰시 금액 10% 추가\n    };\n    const remove = async () => {\n        console.log(\"타입은?\", typeof id);\n        productService.removeProduct(id); // id 찾아서 그 상품 삭제\n        setTimeout(refresh, 20000);\n    };\n\n    return (\n        <>\n            <section className=\"card\">\n                <Link to={path}>\n                    {fileurl.map((url) => {\n                        return <img key={Math.random()} className=\"card-img-top\" src={url.fileurls} alt=\"Card image cap\" />;\n                    })}\n                    <div className=\"card-body\">\n                        <h5 className=\"card-title\">{name}</h5>\n\n                        {(oneproduct && (\n                            <>\n                                <span className=\"card-text\">{price}</span>\n                                <h3> - buyer_id : {(buyer_id && buyer_id) || \"현재 입찰자 없음\"}</h3>\n                                <button onClick={Plus}>{parseInt(price * 1.1)}원에 입찰하기</button>\n                            </>\n                        )) || <span>입찰은 상품 상세에서 가능합니다. 현재 금액을 보시거나 입찰하시려면 상품을 클릭하세요</span>}\n\n                        <p className=\"card-text\">\n                            <small className=\"text-muted\">{description}</small>\n                        </p>\n                        <span>{finish == false && parseDate(createdAt).length == 27 ? onfinish() : parseDate(createdAt)}</span>\n                    </div>\n                </Link>\n            </section>\n            {finish == false ? (\n                <>\n                    <button onClick={remove}>삭제하기</button>\n\n                    <button onClick={onClick}>상품 수정하기</button>\n                </>\n            ) : (\n                \"\"\n            )}\n\n            <hr />\n        </>\n    );\n});\n\nconst AuctionDetail = ({ match }) => {\n    const baseURL = process.env.REACT_APP_BASE_URL;\n    const socketClient = new Socket(baseURL);\n    const productService = new ProductService(socketClient);\n    const product_id = match.params.number;\n    const history = useHistory();\n    console.log(\"히스토리\", history);\n    const [products, setProducts] = useState([]);\n    const [error, setError] = useState(\"\");\n\n    const getProduct = async()=>{\n        let res = await get()\n    }\n\n    useEffect(() => {\n      product_id\n        ? productService\n            .getProducts(product_id) // product_id인 상품 가져오기\n            .then(product => setProducts([{ ...product }]))\n            .catch(onError)\n        : productService\n            .getProducts() // 모든 상품 가져오기\n            .then(product => setProducts([...product]))\n            .catch(onError);\n      const stopSync = productService.onSync(product => onCreated(product));\n      return () => stopSync();\n    }, [productService]);\n\n    const onCreated = (product) => {\n        setProducts((products) => (products[0].id == product.id && products.length == 1 ? [product] : products));\n        // setProducts(products => (products.length == 1 ? [product] : products));\n\n        // setProducts(products) : setProducts(product);\n    };\n    console.log(\"이건\", products);\n\n    const onError = (error) => {\n        setError(error.toString());\n        setTimeout(() => {\n            setError(\"\");\n        }, 3000);\n    };\n\n    return (\n        <>\n            {products.length !== 1 ? \"\" : (\n                <ul>\n                    {products.map((product) => (\n                        <Products oneproduct={true} productService={productService} key={product.id} product={product} onError={onError} />\n                    ))}\n                </ul>\n            )}\n        </>\n    );\n};\n\nexport default AuctionDetail;\n"]},"metadata":{},"sourceType":"module"}