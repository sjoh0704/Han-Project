{"ast":null,"code":"var _jsxFileName = \"/home/seung/react/shop/front-shop/src/components/auction/AuctionDetail.js\",\n    _s = $RefreshSig$();\n\nimport { ListGroup, Container, Button, Form, Row, Col, ListGroupItem } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { CategoryDirection } from \"../CategoryBanner\";\nimport { setMoney, setDate } from \"../Convenient\";\nimport Rating from \"../Rating\";\nimport Modal from \"../Modal\";\nimport io from \"socket.io-client\";\nimport auctionTimer from \"./timer\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst socket = io.connect(\"http://localhost:8083\");\n\nfunction AuctionDetail({\n  match,\n  history\n}) {\n  _s();\n\n  const auctionId = match.params.number;\n  const [timer, setTimer] = useState(new Date());\n  const [modalOpen, setModalOpen] = useState(false);\n  const [modalContents, setModalContents] = useState(\"\");\n\n  const closeModal = () => {\n    setModalOpen(false);\n  };\n\n  const [amount, setAmount] = useState(1);\n  const {\n    isLoggedIn,\n    userData\n  } = useSelector(state => ({\n    isLoggedIn: state.user.isLoggedIn,\n    userData: state.user.payload\n  })); // const [like, setLike] = useState({ checked: false });\n\n  const [image, setImage] = useState({\n    fileurl: null\n  });\n  const [product, setProduct] = useState({\n    finish: false,\n    id: null,\n    name: \"\",\n    price: 0,\n    area: null,\n    seller_id: null,\n    createdAt: null,\n    updatedAt: null\n  });\n  const [seller, setSeller] = useState({});\n\n  const fetchProduct = async () => {\n    let res = await axios.get(\"/store/\" + auctionId);\n    let _product = res.data;\n    setProduct(_product);\n    setImage(_product.fileurl.length != 0 ? _product.fileurl[0].fileurls : null);\n    let res_seller = await axios.get(\"/apis/v1/user/\" + _product.seller_id);\n    setSeller(res_seller.data.payload); // check likes\n  };\n\n  useEffect(() => {\n    socket.emit(\"message\", \"hihihii\");\n    socket.on(\"products\", msg => {\n      setProduct(msg);\n    });\n    fetchProduct();\n  }, [auctionId]);\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setTimer(auctionTimer(product.createdAt));\n    }, 1000);\n    return () => clearInterval(interval);\n  }, [timer]);\n\n  const onClickBid = async e => {\n    if (isLoggedIn === false || userData == null) {\n      setModalOpen(true);\n      setModalContents(\"로그인 후 이용하세요.\");\n      history.replace(\"/login\");\n      return;\n    } else if (userData.user_id == product.seller_id) {\n      setModalOpen(true);\n      setModalContents(\"판매자가 구매할 수 없습니다.\");\n      e.preventDefault();\n      return;\n    }\n\n    let res = await axios.put(\"/store/plus/\" + auctionId, {\n      buyer_id: userData.user_id\n    });\n    alert(\"입찰되었습니다.\");\n  };\n\n  const displayImage = image => {\n    if (!image) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 20\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(ListGroupItem, {\n      children: [/*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        style: {\n          width: \"60vw\"\n        },\n        src: image\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Modal, {\n      open: modalOpen,\n      close: closeModal,\n      children: modalContents\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        background: \"#dedede\"\n      },\n      children: /*#__PURE__*/_jsxDEV(Container, {\n        children: /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col, {\n            xs: {\n              span: 4,\n              offset: 2\n            },\n            sm: {\n              span: 2,\n              offset: 7\n            },\n            md: {\n              span: 1,\n              offset: 9\n            },\n            lg: {\n              span: 1,\n              offset: 8\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                height: \"2rem\",\n                fontSize: \"1.2rem\",\n                margin: 3,\n                color: \"#44444\"\n              },\n              onClick: () => {\n                history.push(\"/auction/home\");\n              },\n              children: \"\\uACBD\\uB9E4 \\uD648\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Col, {\n            xs: {\n              span: 6,\n              offset: 0\n            },\n            sm: {\n              span: 3,\n              offset: 0\n            },\n            md: {\n              span: 2,\n              offset: 0\n            },\n            lg: {\n              span: 2,\n              offset: 0\n            },\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                height: \"2rem\",\n                fontSize: \"1.2rem\",\n                margin: 3,\n                color: \"#44444\"\n              },\n              onClick: () => {\n                history.push(\"/auction/register\");\n              },\n              children: \"\\uACBD\\uB9E4\\uC0C1\\uD488 \\uB4F1\\uB85D\\uD558\\uAE30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(CategoryDirection, {\n        tag1: \"경매\",\n        tag2: product.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          lg: {\n            span: 10,\n            offset: 1\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              border: \"1px solid #dedede\",\n              padding: 5\n            },\n            children: /*#__PURE__*/_jsxDEV(Row, {\n              children: image ? /*#__PURE__*/_jsxDEV(Col, {\n                xs: \"12\",\n                sm: \"12\",\n                md: \"6\",\n                lg: \"7\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    padding: 15\n                  },\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    style: {\n                      width: \"100%\",\n                      height: \"auto\"\n                    },\n                    src: image\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 147,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 146,\n                columnNumber: 37\n              }, this) : \"\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Row, {\n            style: {\n              marginTop: 40\n            },\n            children: /*#__PURE__*/_jsxDEV(Col, {\n              children: /*#__PURE__*/_jsxDEV(ListGroup, {\n                children: [/*#__PURE__*/_jsxDEV(ListGroupItem, {\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: 10,\n                      fontSize: \"2rem\"\n                    },\n                    children: \"\\uACBD\\uB9E4 \\uC0C1\\uC138 \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 167,\n                  columnNumber: 37\n                }, this), displayImage(image), /*#__PURE__*/_jsxDEV(ListGroupItem, {\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    style: {\n                      margin: 20,\n                      fontSize: \"2rem\"\n                    },\n                    children: product.description\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 174,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 173,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 166,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 165,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 164,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 108,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AuctionDetail, \"mP7U0O91kdMFfNBBW3IYjsNsyRs=\", false, function () {\n  return [useSelector];\n});\n\n_c = AuctionDetail;\nexport default AuctionDetail;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuctionDetail\");","map":{"version":3,"sources":["/home/seung/react/shop/front-shop/src/components/auction/AuctionDetail.js"],"names":["ListGroup","Container","Button","Form","Row","Col","ListGroupItem","axios","useEffect","useState","useSelector","Link","CategoryDirection","setMoney","setDate","Rating","Modal","io","auctionTimer","socket","connect","AuctionDetail","match","history","auctionId","params","number","timer","setTimer","Date","modalOpen","setModalOpen","modalContents","setModalContents","closeModal","amount","setAmount","isLoggedIn","userData","state","user","payload","image","setImage","fileurl","product","setProduct","finish","id","name","price","area","seller_id","createdAt","updatedAt","seller","setSeller","fetchProduct","res","get","_product","data","length","fileurls","res_seller","emit","on","msg","interval","setInterval","clearInterval","onClickBid","e","replace","user_id","preventDefault","put","buyer_id","alert","displayImage","width","background","span","offset","height","fontSize","margin","color","push","border","padding","marginTop","description"],"mappings":"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","sourcesContent":["import { ListGroup, Container, Button, Form, Row, Col, ListGroupItem } from \"react-bootstrap\";\nimport axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { CategoryDirection } from \"../CategoryBanner\";\nimport { setMoney, setDate } from \"../Convenient\";\nimport Rating from \"../Rating\";\nimport Modal from \"../Modal\";\nimport io from \"socket.io-client\";\nimport auctionTimer from \"./timer\";\n\nconst socket = io.connect(\"http://localhost:8083\");\n\nfunction AuctionDetail({ match, history }) {\n    const auctionId = match.params.number;\n    const [timer, setTimer] = useState(new Date());\n    const [modalOpen, setModalOpen] = useState(false);\n    const [modalContents, setModalContents] = useState(\"\");\n    const closeModal = () => {\n        setModalOpen(false);\n    };\n\n    const [amount, setAmount] = useState(1);\n    const { isLoggedIn, userData } = useSelector((state) => ({\n        isLoggedIn: state.user.isLoggedIn,\n        userData: state.user.payload,\n    }));\n    // const [like, setLike] = useState({ checked: false });\n    const [image, setImage] = useState({\n        fileurl: null,\n    });\n    const [product, setProduct] = useState({\n        finish: false,\n        id: null,\n        name: \"\",\n        price: 0,\n        area: null,\n        seller_id: null,\n        createdAt: null,\n        updatedAt: null,\n    });\n    const [seller, setSeller] = useState({});\n\n    const fetchProduct = async () => {\n        let res = await axios.get(\"/store/\" + auctionId);\n        let _product = res.data;\n        setProduct(_product);\n        setImage(_product.fileurl.length!=0 ? _product.fileurl[0].fileurls : null);\n\n        let res_seller = await axios.get(\"/apis/v1/user/\" + _product.seller_id);\n        setSeller(res_seller.data.payload);\n\n        // check likes\n    };\n\n    useEffect(() => {\n        socket.emit(\"message\", \"hihihii\");\n        socket.on(\"products\", (msg) => {\n            setProduct(msg);\n        });\n        fetchProduct();\n    }, [auctionId]);\n\n    useEffect(() => {\n        const interval = setInterval(() => {\n            setTimer(auctionTimer(product.createdAt));\n        }, 1000);\n        return () => clearInterval(interval);\n    }, [timer]);\n\n    const onClickBid = async (e) => {\n        if (isLoggedIn === false || userData == null) {\n            setModalOpen(true);\n            setModalContents(\"로그인 후 이용하세요.\");\n            history.replace(\"/login\");\n            return;\n        } else if (userData.user_id == product.seller_id) {\n            setModalOpen(true);\n            setModalContents(\"판매자가 구매할 수 없습니다.\");\n            e.preventDefault();\n            return;\n        }\n        let res = await axios.put(\"/store/plus/\" + auctionId, { buyer_id: userData.user_id });\n        alert(\"입찰되었습니다.\");\n    };\n\n    const displayImage = (image) => {\n        if (!image) {\n            return <div></div>;\n        }\n        return (\n            <ListGroupItem>\n                <br />\n                <img\n                    style={{\n                        width: \"60vw\",\n                    }}\n                    src={image}\n                ></img>\n                <br />\n                <br />\n            </ListGroupItem>\n        );\n    };\n\n    return (\n        <div>\n            <Modal open={modalOpen} close={closeModal}>\n                {modalContents}\n            </Modal>\n            <div style={{ background: \"#dedede\" }}>\n                <Container>\n                    <Row>\n                        <Col xs={{ span: 4, offset: 2 }} sm={{ span: 2, offset: 7 }} md={{ span: 1, offset: 9 }} lg={{ span: 1, offset: 8 }}>\n                            <div\n                                style={{ height: \"2rem\", fontSize: \"1.2rem\", margin: 3, color: \"#44444\" }}\n                                onClick={() => {\n                                    history.push(\"/auction/home\");\n                                }}\n                            >\n                                경매 홈\n                            </div>\n                        </Col>\n                        <Col xs={{ span: 6, offset: 0 }} sm={{ span: 3, offset: 0 }} md={{ span: 2, offset: 0 }} lg={{ span: 2, offset: 0 }}>\n                            <div\n                                style={{ height: \"2rem\", fontSize: \"1.2rem\", margin: 3, color: \"#44444\" }}\n                                onClick={() => {\n                                    history.push(\"/auction/register\");\n                                }}\n                            >\n                                경매상품 등록하기\n                            </div>\n                        </Col>\n                    </Row>\n                </Container>\n            </div>\n\n            <Container>\n                <CategoryDirection tag1={\"경매\"} tag2={product.name} />\n                <Row>\n                    <Col lg={{ span: 10, offset: 1 }}>\n                        <div style={{ border: \"1px solid #dedede\", padding: 5 }}>\n                            <Row>\n                                {image ? (\n                                    <Col xs=\"12\" sm=\"12\" md=\"6\" lg=\"7\">\n                                        <div style={{ padding: 15 }}>\n                                            <img\n                                                style={{\n                                                    width: \"100%\",\n                                                    height: \"auto\",\n                                                }}\n                                                src={image}\n                                            ></img>\n                                        </div>\n                                    </Col>\n                                ) : (\n                                    \"\"\n                                )}\n\n                                \n                            </Row>\n                        </div>\n                        <Row style={{ marginTop: 40 }}>\n                            <Col>\n                                <ListGroup>\n                                    <ListGroupItem>\n                                        <p style={{ margin: 10, fontSize: \"2rem\" }}>경매 상세 </p>\n                                    </ListGroupItem>\n\n                                    {displayImage(image)}\n\n                                    <ListGroupItem>\n                                        <p style={{ margin: 20, fontSize: \"2rem\" }}>{product.description}</p>\n                                    </ListGroupItem>\n                                </ListGroup>\n                            </Col>\n                        </Row>\n                    </Col>\n                </Row>\n            </Container>\n        </div>\n    );\n}\n\nexport default AuctionDetail;\n"]},"metadata":{},"sourceType":"module"}